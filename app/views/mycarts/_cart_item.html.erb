<div class="cart-items-wrapper">
  <% if cart.items.length >0 %>

    <% cart.items.each do |item| %>
      <div class="cart-item">
        <div class="cart-item__picture">
          <img src=<%= item.image_url %> alt='image'>
        </div>
        <div class="cart-item__content">
          <p class="cart-item__content--title"><%= item.title %></p>
          <p><%= item.price %>â‚¬</p>
          <p><span class="cart-item__content--quantity">QuantitÃ© :</span> <%= JoinTableItemCart.find_by(item: item, cart: cart).quantity %></p>

          <%# Fonction d'ajout ou retrait de quantitÃ© : Moins de 1 = Supprimer l'article %>
          <% if (JoinTableItemCart.find_by(item: item, cart: cart).quantity - 1 <= 0) %>
            <div class="cart-item__content--options">
              <%= link_to "Supprimer", join_table_item_cart_path(item.id), method: "delete", class:"btn danger-btn" %>
              <%= link_to "+", join_table_item_cart_path(id: item.id, increment: 1), method: "patch",class:"change_quantity" %>
            </div>
          <% else %>
            <%# InsÃ©rer ici fonction d'incrÃ©ment de quantitÃ© %>
            <div class="cart-item__content--options">
              <%= link_to "-", join_table_item_cart_path(id: item.id, increment: -1), method: "patch",class:"change_quantity" %>
              <%= link_to "+", join_table_item_cart_path(id: item.id, increment: 1), method: "patch",class:"change_quantity" %>
            </div>
          <% end %>

        </div>
      </div>
    <% end %>

  <% else %>
    <p> Le panier est vide. ðŸ˜¿ </p>
    <%= link_to "Retour Ã  l'accueil", root_path, class:"btn" %>
  <% end %>
</div>

<div class="cart-total-wrapper">
  <% if cart.items.length > 0 %>
    <p class="cart-total-wrapper__amount"> Total : <%= @total_amount %>â‚¬</p>
    <%= link_to "Finaliser la commande",
      checkout_create_path(cart: cart),
      class:"btn",
      remote: true,
      method: :post %>
  <% end %>
</div>
